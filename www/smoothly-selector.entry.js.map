{"file":"smoothly-selector.entry.esm.js","mappings":"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","names":[],"sources":["./node_modules/smoothly/dist/collection/components/selector/style.css?tag=smoothly-selector&encapsulation=scoped","./node_modules/smoothly/dist/collection/components/selector/index.js"],"sourcesContent":["\n:host {\n\tposition: relative;\n\theight: 100%;\n}\n:host > main,\n:host > main > * {\n\theight: 100%;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n:host > div > nav {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: absolute;\n\tz-index: 10;\n}\n:host > aside {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 5em;\n\tz-index: 10;\n\tbackground-color: rgb(var(--smoothly-tertiary-color));\n\tcolor: rgb(var(--smoothly-tertiary-contrast));\n\theight: 1.25rem;\n\tborder-radius: 0.3rem;\n\tpadding: 0.3rem;\n\tdisplay: flex;\n\talign-items: center;\n}\n:host().missing > aside {\n\tbackground-color: rgb(var(--smoothly-warning-color));\n\tcolor: rgb(var(--smoothly-warning-contast));\n}\n.hidden {\n\tdisplay: none;\n}\n:host > section {\n\tposition: fixed;\n\ttop: 0px;\n\tleft: 0px;\n\twidth: 100vw;\n\theight: 100vh;\n\tz-index: 10;\n}\n","import { Component, Element, Event, h, Host, Listen, State, Watch } from \"@stencil/core\";\nexport class Selector {\n  constructor() {\n    this.opened = false;\n    this.items = [];\n    this.missing = false;\n    this.filter = \"\";\n  }\n  onSelectedChange(value, old) {\n    if (old)\n      old.selected = false;\n    this.selected.emit(value === null || value === void 0 ? void 0 : value.value);\n  }\n  async onFilterChange(value) {\n    value = value.toLowerCase();\n    if (!(await Promise.all(this.items.map(item => item.filter(value)))).some(r => r)) {\n      this.missing = true;\n      this.items.forEach(el => el.filter(\"\"));\n    }\n    else\n      this.missing = false;\n  }\n  onClick(event) {\n    event.stopPropagation();\n    this.opened = !this.opened;\n  }\n  onItemSelected(event) {\n    this.selectedElement = event.target;\n    if (this.mainElement)\n      this.mainElement.innerHTML = this.selectedElement.innerHTML;\n  }\n  onKeyDown(event) {\n    event.stopPropagation();\n    if (this.opened) {\n      let direction = 0;\n      switch (event.key) {\n        case \"ArrowUp\":\n          direction = -1;\n          break;\n        case \"ArrowDown\":\n          direction = 1;\n          break;\n        case \"Escape\":\n          this.filter = \"\";\n          break;\n        case \"Backspace\":\n          this.filter = this.filter.slice(0, -1);\n          break;\n        case \"Enter\":\n          this.items.forEach(element => {\n            if (!element.hidden) {\n              this.selected.emit(element.value);\n              if (this.mainElement && this.selectedElement)\n                this.mainElement.innerHTML = this.selectedElement.innerHTML;\n              this.opened = false;\n              this.filter = \"\";\n            }\n          });\n          break;\n        default:\n          if (event.key.length == 1)\n            this.filter += event.key;\n          break;\n      }\n      this.move(direction);\n    }\n    else if (event.key == \"Enter\")\n      this.opened = true;\n  }\n  move(direction) {\n    if (direction) {\n      let selectedIndex = this.items.findIndex(item => item == this.selectedElement);\n      console.log(\"selectedindex\", selectedIndex);\n      do {\n        selectedIndex = (selectedIndex + direction + this.items.length) % this.items.length;\n      } while (this.items[selectedIndex].hidden);\n      this.selectedElement = this.items[selectedIndex];\n      this.selectedElement.selected = true;\n    }\n  }\n  render() {\n    return (h(Host, { tabIndex: 2, class: this.missing ? \"missing\" : \"\" },\n      h(\"main\", { ref: element => (this.mainElement = element) }, \"(none)\"),\n      this.filter.length != 0 ? (h(\"aside\", { ref: element => (this.aside = element) },\n        this.filter,\n        h(\"button\", { onClick: e => {\n            e.stopPropagation();\n            this.filter = \"\";\n          } },\n          h(\"smoothly-icon\", { name: \"close\", size: \"small\" })))) : undefined,\n      this.opened ? h(\"section\", { onClick: () => (this.opened = true) }) : [],\n      h(\"div\", { class: this.opened ? \"\" : \"hidden\" },\n        h(\"nav\", null,\n          h(\"slot\", null)))));\n  }\n  componentDidRender() {\n    const items = [];\n    const children = this.element.querySelectorAll(\"div > nav > smoothly-item\");\n    for (let i = 0; i < children.length; i++) {\n      const node = children.item(i);\n      if (isItem(node))\n        items.push(node);\n    }\n    this.items = items;\n  }\n  static get is() { return \"smoothly-selector\"; }\n  static get encapsulation() { return \"scoped\"; }\n  static get originalStyleUrls() { return {\n    \"$\": [\"style.css\"]\n  }; }\n  static get styleUrls() { return {\n    \"$\": [\"style.css\"]\n  }; }\n  static get states() { return {\n    \"opened\": {},\n    \"selectedElement\": {},\n    \"missing\": {},\n    \"filter\": {}\n  }; }\n  static get events() { return [{\n      \"method\": \"selected\",\n      \"name\": \"selected\",\n      \"bubbles\": true,\n      \"cancelable\": true,\n      \"composed\": true,\n      \"docs\": {\n        \"tags\": [],\n        \"text\": \"\"\n      },\n      \"complexType\": {\n        \"original\": \"any\",\n        \"resolved\": \"any\",\n        \"references\": {}\n      }\n    }]; }\n  static get elementRef() { return \"element\"; }\n  static get watchers() { return [{\n      \"propName\": \"selectedElement\",\n      \"methodName\": \"onSelectedChange\"\n    }, {\n      \"propName\": \"filter\",\n      \"methodName\": \"onFilterChange\"\n    }]; }\n  static get listeners() { return [{\n      \"name\": \"click\",\n      \"method\": \"onClick\",\n      \"target\": undefined,\n      \"capture\": false,\n      \"passive\": false\n    }, {\n      \"name\": \"itemSelected\",\n      \"method\": \"onItemSelected\",\n      \"target\": undefined,\n      \"capture\": false,\n      \"passive\": false\n    }, {\n      \"name\": \"keydown\",\n      \"method\": \"onKeyDown\",\n      \"target\": undefined,\n      \"capture\": false,\n      \"passive\": false\n    }]; }\n}\nfunction isItem(value) {\n  return (typeof value == \"object\" &&\n    (typeof value.selected == \"boolean\" || value.selected == undefined) &&\n    typeof value.filter == \"function\");\n}\n"],"version":3}