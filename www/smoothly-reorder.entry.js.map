{"file":"smoothly-reorder.entry.esm.js","mappings":"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","names":[],"sources":["./node_modules/smoothly/dist/collection/components/reorder/style.css?tag=smoothly-reorder","./node_modules/smoothly/dist/collection/components/reorder/index.js"],"sourcesContent":["smoothly-reorder > * {\n\tcursor: move;\n\ttransition: transform 0.3s;\n}\nsmoothly-reorder > *.dragging {\n\ttransition: none;\n\tbox-shadow: 0 0 10px rgba(var(--smoothly-dark-color));\n\tz-index: 1;\n\tuser-select: none;\n}\n","import { Component, Element, Event } from \"@stencil/core\";\nexport class SmoothlyReorder {\n  get children() {\n    let result = [];\n    if (this.childrenCache)\n      result = this.childrenCache;\n    else {\n      for (let index = 0; index < this.element.children.length; index++) {\n        const element = this.element.children[index];\n        if (element instanceof HTMLElement) {\n          const bounds = element.getBoundingClientRect();\n          result.push({\n            top: bounds.top,\n            middle: bounds.top + bounds.height / 2,\n            bottom: bounds.bottom,\n            element: element,\n          });\n        }\n      }\n      this.childrenCache = result;\n    }\n    return result;\n  }\n  onMouseDown(event) {\n    if (!this.move && this.element.children.length > 1) {\n      this.bounds = this.element.getBoundingClientRect();\n      this.childrenCache = undefined;\n      const index = this.getCurrentIndex(event.clientY);\n      this.dragged = Object.assign(Object.assign({}, this.children[index]), { startY: event.clientY, offsetY: event.clientY - this.children[index].middle, index, height: index < this.children.length - 1\n          ? this.children[index + 1].top - this.children[index].top\n          : this.children[index].bottom - this.children[index - 1].bottom });\n      this.dragged.element.className += \" dragging\";\n    }\n  }\n  onMouseMove(event) {\n    if (this.dragged && this.bounds && event.clientY >= this.bounds.top && event.clientY <= this.bounds.bottom) {\n      const currentIndex = this.getCurrentIndex(event.clientY - this.dragged.offsetY);\n      this.translate(this.dragged.index, currentIndex, event.clientY - this.dragged.startY);\n    }\n  }\n  onMouseUp(event) {\n    if (this.dragged) {\n      this.dragged.element.className = this.dragged.element.className.replace(\" dragging\", \"\");\n      const index = this.getCurrentIndex(event.clientY - this.dragged.offsetY);\n      this.translate(this.dragged.index, index, this.children[index].top - this.dragged.top);\n      this.move = { from: this.dragged.index, to: index };\n      this.dragged = undefined;\n      window.setTimeout(() => {\n        if (this.move) {\n          const children = [...this.children.map(c => c.element)];\n          const e = children.splice(this.move.from, 1);\n          children.splice(this.move.to, 0, ...e);\n          children.forEach(child => this.element.removeChild(child));\n          children.forEach(child => {\n            child.style.transform = \"\";\n            this.element.appendChild(child);\n          });\n          this.reorder.emit([this.move.from, this.move.to]);\n          this.move = undefined;\n        }\n      }, 500);\n    }\n  }\n  translate(fromIndex, toIndex, y) {\n    for (let index = 0; index < this.children.length; index++) {\n      let value;\n      if (this.dragged) {\n        if (fromIndex < toIndex && index > fromIndex && index <= toIndex)\n          value = -this.dragged.height;\n        else if (fromIndex > toIndex && index < fromIndex && index >= toIndex)\n          value = this.dragged.height;\n        else\n          value = index == fromIndex ? y : 0;\n        this.children[index].element.style.transform = `translateY(${value}px)`;\n      }\n    }\n  }\n  getCurrentIndex(y) {\n    return this.children.findIndex(c => y < c.bottom);\n  }\n  componentDidLoad() {\n    this.element.childNodes.forEach(child => {\n      child.addEventListener(\"mousedown\", (e) => this.onMouseDown(e));\n      child.addEventListener(\"mousemove\", (e) => this.onMouseMove(e));\n      child.addEventListener(\"mouseup\", (e) => this.onMouseUp(e));\n    });\n  }\n  static get is() { return \"smoothly-reorder\"; }\n  static get originalStyleUrls() { return {\n    \"$\": [\"style.css\"]\n  }; }\n  static get styleUrls() { return {\n    \"$\": [\"style.css\"]\n  }; }\n  static get events() { return [{\n      \"method\": \"reorder\",\n      \"name\": \"reorder\",\n      \"bubbles\": true,\n      \"cancelable\": true,\n      \"composed\": true,\n      \"docs\": {\n        \"tags\": [],\n        \"text\": \"\"\n      },\n      \"complexType\": {\n        \"original\": \"[number, number]\",\n        \"resolved\": \"[number, number]\",\n        \"references\": {}\n      }\n    }]; }\n  static get elementRef() { return \"element\"; }\n}\n"],"version":3}